---
title: 三栏式布局
date: 2017-02-26 01:17:37
tags: css
categories: 前端
---
position: absolute和fixed脱离了文档流，无法计算高度，作为子元素的话是无法撑开父元素的。

CSS很弱鸡的说，因此参加百度前端技术学院恶补下，今天三栏式布局，一不小心踩了一堆的坑。现在来总结一样，收获还是不晓得（小的...）

## 题设
首先给的题目是这样的：

![三栏式布局](/img/three_column_layout.png)

## 绝对定位
首先拿到题目，思路是，外层包一个大的`div`，然后，左右栏分别使用`float: left`和`float: right`浮动定位，中间栏我第一时间就认定是使用`position: absolute`绝对定位。事实上，这个思路是没有错的。代码如下：

<!-- more -->

``` html
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>团队介绍</title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<div id="container">
		<div class="leftbox">
			<div class="sefie">
				<img src="img/me.jpg">
				<div class="intro">
					<p>**</p>
					<p>_________</p>
					<p>_________</p>
					<p>_________</p>
					<p>_________</p>
				</div>
			</div>
		</div>
		<div class="middlebox">
			<h1>清除浮动（clearfix hack）</h1>
			<p>在使用浮动的时候经常会遇到一个古怪的事情：</p>
			<img src="img/img.png">
			<div class="div1">
				<p>&lt;div&gt;</p>
				<p>不......这个图片比包含它的元素还高，而且它是浮动的，于是它就溢出到了容器外面！</p>
				<img src="img/eg.png">
			</div>
			<p>见证奇迹的时候到了！有一种比较丑陋的方法可以解决这个问题，它叫做<i>清除浮动（clearfix hack）</i>。</p>。
			<p>让我们加入一些新的CSS样式：</p>
			<img src="img/clearfix.png">
			<p>现在再看看发生了什么：</p>
			<div class="div2">
				<p>&lt;div class="clearfix"&gt;</p>
				<p>好多了！</p>
				<img src="img/eg.png">
			</div>
			<p>这个可以在现代浏览器上工作。如果你想要支持IE6，你就需要再加入如下样式：</p>
			<img src="img/clearfix2.png">
			<p>有些独特的浏览器需要“额外的关照”。<a href="http://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best">清除浮动这潭水很深很深</a>，但是这个简单的解决方案已经可以在今天所有主要浏览器上工作。</p>
		</div>
		<div class="rightbox">
			
		</div>
	</div>

</body>
</html>
```

``` css
/* clear browser default settings */
* {
	margin: 0;
	padding: 0;
}

/* main css settings */
html {
	font-family: Arial, "Microsoft YaHei";
	font-size: 15px;
}

body {
	padding: 20px;
}

#container {
	overflow: auto;
 	padding: 20px;
	background-color: #eee;
	border: 1px solid #999;
}

/* leftbox start */
.leftbox {
	float: left;
	width: 200px;
	padding: 20px;
	background-color: #fff;
	border: 1px solid #999;
}

.sefie {
	position: relative;
	padding: 2px;
	border: 1px solid #eee;
}

.sefie img {
	width: 80px;
}

.sefie .intro {
	position: absolute;
	top: 1em;
	right: 0;
	width: 120px;
}

.sefie .intro p {
	text-align: center;
}

/* leftbox end */

/* middle start */
.middlebox {
	position: absolute;
	left: 280px;
	right: 200px;
	padding: 20px;
	background-color: #fff;
	border: 1px solid #999;
}

.middlebox p {
	text-indent: 2em;
}
/* middle end */

/* right start */
.rightbox {
	float: right;
	padding: 20px;
	width: 120px;
	background-color: #fff;
	border: 1px solid #999;
}
/* right end */
```
然而。。。

当我写完了`leftbox`和`rightbox`，加上了`middlebox`之后，却发现父容器无法包含`middlebox`。效果图如下：

![三栏式布局](/img/three_column_layout1.png)

## 相对定位
父容器无法包含绝对定位的元素，因为绝对定位是脱离文档流的！

所以只能使用相对定位。该代码如下：

``` css
.middlebox {
	margin-left: 280px;
	margin-right: 200px;
	padding: 20px;
	background-color: #fff;
	border: 1px solid #999;
}
```

除此之外，html定义div的顺序也十分重要，`middlebox`的定义必须放在最后面，因为浮动定位是根据前面的元素来计算的。所以，如果把`middlebox`的定义放在前面会出现这种结果：

![三栏式布局](/img/three_column_layout2.png)

这当然也不是要求的结果。

除此之外，如果后面还要再加布局，一定要注意清除浮动`clear: both`。

总结下知识点，主要考查知识点`position`，`static`属性属于默认的，按照文档流布局，`absolute`和`fixed`都是绝对定位，区别在于`fixed`相对于浏览器窗口，`absolute`相对于`static`之外的第一个父元素。`relative`相对于其正常位置偏移，使用`top`、`right`、`bottom`和`left`定位。`inherit`继承父级元素`position`属性。

需要注意的是绝对定位无法自适应计算高宽，在遇到需要这种情况时采用相对布局。